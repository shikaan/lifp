; This example is here to show how poorly we handle tail recursion
; (not at all!) so anything more than `(fibonacci 3)` with the
; default memory (64kb for parsing and 32kb per environment) will
; crash

(def! fibonacci
  (fn (a)
    (cond
      ((< a 1) 0)
      ((= a 1) 1)
      ((= a 2) 2)
      (+ (fibonacci (- a 1)) (fibonacci (- a 2))))))

(io.print! (fibonacci 30))

; vim syntax=lisp
